<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>솟대공작소 - 소원의 산마루</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Yeongwol&display=swap" rel="stylesheet" />
    
    <style>
      /* 로컬 폰트 정의 */
      @font-face {
        font-family: 'Yeongwol';
        src: url('./YeongwolTTF.ttf') format('truetype');
        font-weight: normal;
        font-style: normal;
      }
      @font-face {
        font-family: 'happygoheung M';
        src: url('./행복고흥M.ttf') format('truetype');
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: 'gkswk';
        src: url('./gkswk.ttf') format('truetype');
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }
      
      /* 상품 카드 애니메이션 */
      .product-card {
        transition: all 0.3s ease;
        cursor: pointer;
      }
      
      .product-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }
      
      /* 카테고리 필터 버튼 */
      .filter-button {
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }
      
      .filter-button.active {
        background: #1f2937;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      
      .filter-button:hover:not(.active) {
        background: #f3f4f6;
        transform: translateY(-1px);
      }
      
      /* 상품 이미지 스타일 */
      .product-image {
        background: #f3f4f6;
        position: relative;
        overflow: hidden;
      }
      
      /* 그리드 애니메이션 */
      .product-grid {
        display: grid;
        gap: 24px;
        grid-template-columns: repeat(4, 1fr);
      }
      
      @media (max-width: 768px) {
        .product-grid {
          grid-template-columns: repeat(4, 1fr);
          gap: 16px;
        }
      }
      
      /* 로딩 애니메이션 */
      .loading-shimmer {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
      }
      
      @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
      }
      
      /* 스크롤 애니메이션 */
      .fade-in {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s ease;
      }
      
      .fade-in.visible {
        opacity: 1;
        transform: translateY(0);
      }
    </style>
  </head>

  <body class="m-0 p-0 bg-gray-50 min-h-screen">
    <!-- 네비게이션 바 -->
    <nav class="fixed top-0 left-0 right-0 z-40 backdrop-blur-md bg-gradient-to-b from-black/30 to-black/10 border-b border-white/5">
      <div class="max-w-7xl mx-auto px-6 py-4">
        <div class="flex items-center justify-between">
          <!-- W.S.P 로고와 메뉴 버튼을 함께 배치 -->
          <div class="flex items-center gap-3">
            <!-- 願:솟다 로고 -->
            <h1 
              class="text-2xl font-normal text-white cursor-pointer"
              onclick="window.location.href='./home.html'"
            >
              <span style="font-family: 'gkswk', serif;">願</span><span style="font-family: 'happygoheung M', serif;">:솟다</span>
            </h1>
            
            <!-- 메뉴 토글 버튼 -->
            <div class="relative menu-container">
              <button 
                id="menuToggle"
                class="w-[15px] h-[15px] rounded-full bg-white transition-all duration-300 hover:shadow-[0_0_6px_rgba(255,255,255,0.5)]"
                style="box-shadow: 0 1px 4px rgba(255, 255, 255, 0.2); background-image: none; background-size: 25px 25px; background-repeat: no-repeat; background-position: center;"
              ></button>
              
              <!-- 드롭다운 메뉴 -->
              <div 
                id="dropdownMenu"
                class="absolute top-4 left-4 w-[140px] bg-black/60 backdrop-blur-[8px] rounded-xl shadow-[0_4px_10px_rgba(0,0,0,0.3)] transition-all duration-300 ease-in-out opacity-0 invisible translate-y-[-5px]"
                style="z-index: 50;"
              >
                <nav class="p-2">
                  <ul class="space-y-1">
                    <li class="transition-all duration-200 hover:translate-x-1">
                      <a 
                        href="./sotdae-workshop.html" 
                        class="text-[#f3f1e9] text-sm font-medium hover:text-white transition-colors duration-200 block py-2 px-3 rounded-lg hover:bg-white/5"
                        style="font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;"
                      >
                        솟대공작소
                      </a>
                    </li>
                    <li class="transition-all duration-200 hover:translate-x-1">
                      <a 
                        href="./calendar.html" 
                        class="text-[#f3f1e9] text-sm font-medium hover:text-white transition-colors duration-200 block py-2 px-3 rounded-lg hover:bg-white/5"
                        style="font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;"
                      >
                        바람일지
                      </a>
                    </li>
                    <li class="transition-all duration-200 hover:translate-x-1">
                      <a 
                        href="./profile.html" 
                        class="text-[#f3f1e9] text-sm font-medium hover:text-white transition-colors duration-200 block py-2 px-3 rounded-lg hover:bg-white/5"
                        style="font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;"
                      >
                        마이페이지
                      </a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
          </div>
          
          <!-- 우측 아이콘들 -->
          <div class="flex items-center gap-3">
            <!-- 장바구니 버튼 -->
            <button onclick="window.location.href='./sotdae-workshop2.html'" class="relative h-9 w-9 rounded-full bg-white/10 hover:bg-white/20 border border-white/20 hover:border-white/30 flex items-center justify-center transition group">
              <svg class="h-5 w-5 text-white/80 group-hover:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2m0 0h13.2l-1.6 8H6L5.4 5zm0 0L6 13m0 0l1.5 6h9l1.5-6H6z"/>
              </svg>
              <!-- 장바구니 아이템 개수 표시 -->
              <span class="absolute -top-1 -right-1 bg-red-500 text-white text-[10px] rounded-full h-4 w-4 flex items-center justify-center font-bold" id="cartCount">3</span>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- 메인 콘텐츠 -->
    <main class="pt-20">
      <!-- 페이지 타이틀 섹션 -->
      <div class="bg-white py-16">
        <div class="max-w-6xl mx-auto px-6 text-center">
          <h2 
            class="text-4xl sm:text-5xl font-light text-gray-800 mb-6"
            style="font-family: 'Yeongwol', serif;"
          >
            솟대공작소
          </h2>
          <p class="text-base text-gray-500 max-w-3xl mx-auto leading-relaxed">
            마음 속 바람을 담아, 나만의 솟대로 완성하세요.<br>
            단순한 장식이 아닌, 당신만의 특별한 의미를 담은 오브제입니다.
          </p>
        </div>
      </div>

      <!-- 카테고리 필터 -->
      <div class="bg-white border-b border-gray-200 py-6">
        <div class="max-w-6xl mx-auto px-6">
          <div class="flex flex-wrap gap-3 justify-center">
            <button class="filter-button active px-6 py-3 rounded-full border border-gray-300 text-gray-700 font-medium" data-category="all">
              전체
            </button>
            <button class="filter-button px-6 py-3 rounded-full border border-gray-300 text-gray-700 font-medium" data-category="hope">
              희망 & 기쁨
            </button>
            <button class="filter-button px-6 py-3 rounded-full border border-gray-300 text-gray-700 font-medium" data-category="comfort">
              슬픔 & 위로
            </button>
            <button class="filter-button px-6 py-3 rounded-full border border-gray-300 text-gray-700 font-medium" data-category="freedom">
              자유 & 감안
            </button>
          </div>
        </div>
      </div>

      <!-- 상품 그리드 영역 -->
      <div class="bg-gray-50 py-12">
        <div class="max-w-7xl mx-auto px-6">
          <div class="product-grid" id="productGrid" style="grid-auto-rows: 1fr;">
            <!-- 상품들이 JavaScript로 동적으로 생성됩니다 -->
          </div>
        </div>
      </div>
    </main>

    <!-- 푸터 -->
    <footer class="bg-white border-t border-gray-200 py-12">
      <div class="max-w-6xl mx-auto px-6">
        <div class="grid md:grid-cols-4 gap-8">
          <div class="space-y-4">
            <h3 class="text-lg font-semibold text-gray-800">솟대공작소</h3>
            <p class="text-gray-600 text-sm">나만의 특별한 솟대를 만들어보세요</p>
          </div>
          <div class="space-y-4">
            <h3 class="text-lg font-semibold text-gray-800">카테고리</h3>
            <div class="space-y-2">
              <a href="#" class="block text-gray-600 hover:text-gray-800 transition text-sm">희망 & 기쁨</a>
              <a href="#" class="block text-gray-600 hover:text-gray-800 transition text-sm">슬픔 & 위로</a>
              <a href="#" class="block text-gray-600 hover:text-gray-800 transition text-sm">자유 & 감안</a>
            </div>
          </div>
          <div class="space-y-4">
            <h3 class="text-lg font-semibold text-gray-800">고객지원</h3>
            <div class="space-y-2">
              <a href="#" class="block text-gray-600 hover:text-gray-800 transition text-sm">문의하기</a>
              <a href="#" class="block text-gray-600 hover:text-gray-800 transition text-sm">배송안내</a>
              <a href="#" class="block text-gray-600 hover:text-gray-800 transition text-sm">교환/반품</a>
            </div>
          </div>
          <div class="space-y-4">
            <h3 class="text-lg font-semibold text-gray-800">연락처</h3>
            <div class="space-y-2">
              <p class="text-gray-600 text-sm">sotdae@example.com</p>
              <p class="text-gray-600 text-sm">02-1234-5678</p>
            </div>
          </div>
        </div>
        <div class="mt-12 pt-8 border-t border-gray-200 text-center">
          <p class="text-gray-500 text-sm">© 2024 솟대공작소. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <script>
      // 상품 데이터
      const productsData = [
        {
          id: 1,
          name: "오리 솟대",
          price: 20000,
          category: "hope",
          image: "https://via.placeholder.com/300x300?text=Sotdae+1"
        },
        {
          id: 2,
          name: "참새 솟대",
          price: 25000,
          category: "comfort",
          image: "https://via.placeholder.com/300x300?text=Sotdae+2"
        },
        {
          id: 3,
          name: "비둘기 솟대",
          price: 30000,
          category: "freedom",
          image: "https://via.placeholder.com/300x300?text=Sotdae+3"
        },
        {
          id: 4,
          name: "백로 솟대",
          price: 22000,
          category: "hope",
          image: "https://via.placeholder.com/300x300?text=Sotdae+4"
        },
        {
          id: 5,
          name: "Healing Light",
          price: 28000,
          category: "comfort",
          image: "https://via.placeholder.com/300x300?text=Sotdae+5"
        },
        {
          id: 6,
          name: "Wild Spirit",
          price: 32000,
          category: "freedom",
          image: "https://via.placeholder.com/300x300?text=Sotdae+6"
        },
        {
          id: 7,
          name: "Bright Future",
          price: 24000,
          category: "hope",
          image: "https://via.placeholder.com/300x300?text=Sotdae+7"
        },
        {
          id: 8,
          name: "Gentle Comfort",
          price: 26000,
          category: "comfort",
          image: "https://via.placeholder.com/300x300?text=Sotdae+8"
        },
        {
          id: 9,
          name: "Unbound Soul",
          price: 35000,
          category: "freedom",
          image: "https://via.placeholder.com/300x300?text=Sotdae+9"
        },
        {
          id: 10,
          name: "Radiant Hope",
          price: 23000,
          category: "hope",
          image: "https://via.placeholder.com/300x300?text=Sotdae+10"
        },
        {
          id: 11,
          name: "Serene Wisdom",
          price: 29000,
          category: "comfort",
          image: "https://via.placeholder.com/300x300?text=Sotdae+11"
        },
        {
          id: 12,
          name: "Boundless Sky",
          price: 31000,
          category: "freedom",
          image: "https://via.placeholder.com/300x300?text=Sotdae+12"
        }
      ];

      // 현재 선택된 카테고리
      let currentCategory = 'all';

      // 상품 카드 생성 함수
      function createProductCard(product) {
        return `
          <div class="product-card bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden fade-in cursor-pointer" data-category="${product.category}" onclick="goToProductDetail(${product.id})">
            <div class="aspect-square w-full bg-gray-100 rounded-t-lg overflow-hidden">
              <img src="${product.id === 1 ? './sotdae4.png' : (product.id === 2 ? './a1.2.png' : (product.id === 3 ? './a2.2.png' : (product.id === 4 ? './s5.png' : './sotdae.png')))}" alt="${product.name}" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
            </div>
            <div class="p-4">
              <h3 class="font-medium text-gray-800 text-lg mb-2">${product.name}</h3>
              <p class="text-gray-600 font-semibold">${product.price.toLocaleString()}원</p>
            </div>
          </div>
        `;
      }

      // 장바구니 데이터를 localStorage에서 가져오기
      function getCartItems() {
        const saved = localStorage.getItem('sotdaeCart');
        return saved ? JSON.parse(saved) : [];
      }

      // 장바구니 데이터를 localStorage에 저장
      function saveCartItems(cartItems) {
        localStorage.setItem('sotdaeCart', JSON.stringify(cartItems));
      }

      // 상품 상세 페이지로 이동
      function goToProductDetail(productId) {
        const selectedImage = productId === 2 ? 'a1.png' : (productId === 3 ? 'a2.png' : (productId === 4 ? 's5.png' : 'sotdae4.png'));
        window.location.href = `./customize-color.html?id=${productId}&img=${encodeURIComponent(selectedImage)}`;
      }

      // 장바구니에 상품 추가
      function addToCart(productId) {
        const product = productsData.find(p => p.id === productId);
        if (product) {
          let cartItems = getCartItems();
          const existingItem = cartItems.find(item => item.id === productId);
          if (existingItem) {
            existingItem.quantity += 1;
          } else {
            cartItems.push({
              id: product.id,
              name: product.name,
              price: product.price,
              category: product.category,
              quantity: 1,
              selected: true
            });
          }
          
          // localStorage에 저장
          saveCartItems(cartItems);
          
          // 장바구니 개수 업데이트
          updateCartCount();
          
          // 성공 메시지 표시
          showAddToCartMessage(product.name);
        }
      }

      // 장바구니 개수 업데이트
      function updateCartCount() {
        const cartItems = getCartItems();
        const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
        const cartCount = document.getElementById('cartCount');
        if (cartCount) {
          cartCount.textContent = totalItems;
          cartCount.style.display = totalItems > 0 ? 'flex' : 'none';
        }
      }

      // 장바구니 추가 성공 메시지
      function showAddToCartMessage(productName) {
        // 간단한 토스트 메시지 (실제로는 더 세련된 토스트 컴포넌트 사용)
        const message = document.createElement('div');
        message.className = 'fixed top-20 right-6 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300';
        message.textContent = `${productName}이(가) 장바구니에 추가되었습니다!`;
        
        document.body.appendChild(message);
        
        // 3초 후 제거
        setTimeout(() => {
          message.style.opacity = '0';
          message.style.transform = 'translateX(100%)';
          setTimeout(() => {
            document.body.removeChild(message);
          }, 300);
        }, 3000);
      }

      // 상품 그리드 렌더링
      function renderProducts(category = 'all') {
        const productGrid = document.getElementById('productGrid');
        const filteredProducts = category === 'all' 
          ? productsData 
          : productsData.filter(product => product.category === category);
        
        productGrid.innerHTML = filteredProducts.map(product => createProductCard(product)).join('');
        
        // 스크롤 애니메이션 적용
        setTimeout(() => {
          const cards = document.querySelectorAll('.fade-in');
          cards.forEach((card, index) => {
            setTimeout(() => {
              card.classList.add('visible');
            }, index * 100);
          });
        }, 100);
      }

      // 카테고리 필터 이벤트
      function initCategoryFilters() {
        const filterButtons = document.querySelectorAll('.filter-button');
        
        filterButtons.forEach(button => {
          button.addEventListener('click', () => {
            // 모든 버튼에서 active 클래스 제거
            filterButtons.forEach(btn => btn.classList.remove('active'));
            
            // 클릭된 버튼에 active 클래스 추가
            button.classList.add('active');
            
            // 선택된 카테고리 업데이트
            currentCategory = button.dataset.category;
            
            // 상품 그리드 다시 렌더링
            renderProducts(currentCategory);
          });
        });
      }

      // 상품 카드 클릭 이벤트 (이제 카드 자체에 onclick이 있으므로 불필요)
      function initProductClicks() {
        // 카드 자체에 onclick="goToProductDetail()" 이벤트가 있으므로
        // 이 함수는 더 이상 필요하지 않습니다.
      }

      // 페이지 로드 시 초기화
      document.addEventListener('DOMContentLoaded', () => {
        renderProducts();
        initCategoryFilters();
        updateCartCount(); // 장바구니 개수 초기화
      });

      // 메뉴 토글 기능
      const menuToggle = document.getElementById('menuToggle');
      const dropdownMenu = document.getElementById('dropdownMenu');
      let isMenuOpen = false;

      // hover 효과 추가
      menuToggle.addEventListener('mouseenter', function() {
        this.style.backgroundImage = 'url("./zkem.png")';
        this.style.backgroundColor = 'transparent';
        this.style.backgroundSize = '25px 25px';
      });

      menuToggle.addEventListener('mouseleave', function() {
        this.style.backgroundImage = 'none';
        this.style.backgroundColor = '#ffffff';
        this.style.backgroundSize = '25px 25px';
      });

      menuToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        isMenuOpen = !isMenuOpen;
        
        if (isMenuOpen) {
          dropdownMenu.classList.remove('opacity-0', 'invisible', 'translate-y-[-5px]');
          dropdownMenu.classList.add('opacity-100', 'visible', 'translate-y-0');
        } else {
          dropdownMenu.classList.remove('opacity-100', 'visible', 'translate-y-0');
          dropdownMenu.classList.add('opacity-0', 'invisible', 'translate-y-[-5px]');
        }
      });

      // 메뉴 외부 클릭 시 닫기
      document.addEventListener('click', function(e) {
        if (isMenuOpen && !e.target.closest('.menu-container')) {
          isMenuOpen = false;
          dropdownMenu.classList.remove('opacity-100', 'visible', 'translate-y-0');
          dropdownMenu.classList.add('opacity-0', 'invisible', 'translate-y-[-5px]');
        }
      });
    </script>
  </body>
</html>
